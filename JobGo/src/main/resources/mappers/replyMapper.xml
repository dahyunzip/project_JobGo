<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.itwillbs.mapper.ReplyMapper">
  	<!-- 댓글 작성 -->
  	<insert id="insertReply">
  		insert into reply (reply_content, ref_bno, reply_writer, create_date, status) 
  		values (#{reply_content},#{ref_bno},#{reply_writer},now(),'Y')
  	</insert>
  
  	<!-- 댓글 목록 조회 -->
  	<select id="selectReplyList" resultType="ReplyVO">
  		select 
  			r.reply_no,
  			r.reply_content,
  			r.ref_bno,
  			m.userid as writerUserid,
  			r.create_date,
  			r.status
  		from reply r 
  		join member m on r.reply_writer = m.userid 
  		where r.ref_bno = #{ref_bno} 
  		and r.status = 'Y' 
  		order by r.reply_no desc;
  	</select>
  	
  	<update id="updateReply">
  		update reply 
  		set reply_content = #{reply_content} 
  		where reply_no = #{reply_no}
  	</update>
  
  	<delete id="deleteReply">
  		delete from reply 
  		where reply_no = #{reply_no}
  	</delete>
  </mapper>